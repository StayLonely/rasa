# Chatbot Agent Management System - Frontend

## Описание проекта

Фронтенд часть системы управления чат-бот агентами, построенная на React с использованием TypeScript. Система предоставляет веб-интерфейс для создания, настройки и тестирования чат-бот агентов.

## Структура проекта

```
frontend/
├── public/                 # Статические файлы
├── src/
│   ├── components/        # Переиспользуемые компоненты
│   ├── pages/             # Страницы приложения
│   ├── services/          # API сервисы для взаимодействия с бекендом
│   ├── types/             # TypeScript типы
│   ├── App.css           # Основные стили приложения
│   ├── App.tsx           # Корневой компонент приложения
│   └── index.tsx         # Точка входа в приложение
├── package.json          # Зависимости и скрипты проекта
└── README.md             # Документация
```

### Основные компоненты

1. **AgentDashboard.tsx** - Главная страница управления агентом с вкладками:
   - Обзор (информация об агенте)
   - NLU (управление интентами и сущностями)
   - Диалоги (визуальный редактор диалогов)
   - Тест чата (интерфейс для тестирования)
   - Логи (история взаимодействий)

2. **NLUEditor.tsx** - Редактор NLU моделей с подвкладками:
   - Интенты (IntentManagement)
   - Сущности (EntityManagement)

3. **IntentManagement.tsx** - Управление интентами агента:
   - Создание/редактирование интентов
   - Управление примерами фраз
   - Интеграция с CreateExampleForm для добавления примеров

4. **EntityManagement.tsx** - Управление сущностями агента:
   - Создание/редактирование сущностей
   - Поддержка разных типов (lookup, regex)

5. **DialogEditor.tsx** - Визуальный конструктор диалоговых сценариев:
   - Создание узлов разных типов
   - Соединение узлов
   - Редактирование свойств узлов

6. **CreateExampleForm.tsx** - Форма для добавления примеров фраз к интентам

7. **CreateAgentForm.tsx** - Форма для создания новых агентов

8. **AgentList.tsx** - Компонент для отображения списка агентов

9. **ChatInterface.tsx** - Компонент интерфейса чата

### Сервисы

- **api.ts** - Сервис для взаимодействия с бекендом через REST API

### Типы

- **agent.ts** - Определения типов для агентов и связанных сущностей

## Интеграция с бекендом

### API Endpoints

Бекенд предоставляет REST API по адресу `http://localhost:8000/api` со следующими основными endpoints:

- `GET /api/agents` - Получение списка агентов
- `POST /api/agents` - Создание нового агента
- `GET /api/agents/{id}` - Получение информации об агенте
- `DELETE /api/agents/{id}` - Удаление агента
- `POST /api/agents/{id}/train` - Запуск обучения агента
- `POST /api/agents/{id}/message` - Отправка сообщения агенту

- `GET /api/agents/{id}/entities` - Получение сущностей агента
- `POST /api/agents/{id}/entities` - Создание сущности
- `PUT /api/agents/{id}/entities/{entityId}` - Обновление сущности
- `DELETE /api/agents/{id}/entities/{entityId}` - Удаление сущности

- `GET /api/agents/{id}/intents` - Получение интентов агента
- `POST /api/agents/{id}/intents` - Создание интента
- `PUT /api/agents/{id}/intents/{intentId}` - Обновление интента
- `DELETE /api/agents/{id}/intents/{intentId}` - Удаление интента

### Изменения в API:

1. **Добавлены новые типы данных:**
   - `DialogNode` - узел диалога с типами (intent, action, response, condition, redirect)
   - `DialogConnection` - соединение между узлами
   - `DialogStory` - история диалога

2. **Расширены существующие интерфейсы:**
   - `Agent` - добавлены поля config_path, domain_path, model_path
   - `Entity` - добавлены поля regex_pattern, lookup_values
   - `Intent` - добавлено поле examples

3. **Добавлены новые функции в API:**
   - `dialogAPI.getStories()` - получение историй диалогов
   - `dialogAPI.saveStory()` - сохранение истории диалога
   - `dialogAPI.getAvailableAgents()` - получение списка доступных агентов для перенаправления

### Интеграция в систему

1. Убедитесь, что бекенд запущен на `http://localhost:8000`
2. Фронтенд автоматически подключится к бекенду через сервис `api.ts`
3. Все данные передаются в формате JSON
4. Для локальной разработки используется прокси в `package.json` для обхода CORS

### Запуск приложения

1. Установите зависимости:
   ```bash
   npm install
   ```

2. Запустите приложение в режиме разработки:
   ```bash
   npm start
   ```

3. Приложение будет доступно по адресу `http://localhost:3000`

### Сборка для продакшена

```bash
npm run build
```

Собранные файлы будут находиться в директории `build/`.

## Дополнительная информация

Этот проект был создан с помощью [Create React App](https://github.com/facebook/create-react-app).

Для получения дополнительной информации о работе с Create React App, посетите [документацию](https://facebook.github.io/create-react-app/docs/getting-started).

Для изучения React, посетите [документацию React](https://reactjs.org/).
